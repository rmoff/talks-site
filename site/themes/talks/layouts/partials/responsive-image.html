{{/*
  Responsive image partial (WebP only)
  Usage: {{ partial "responsive-image.html" (dict "src" .Params.image "alt" .Title "class" "my-class") }}
*/}}
{{ $src := .src }}
{{ $alt := .alt | default "" }}
{{ $class := .class | default "" }}
{{ $loading := .loading | default "lazy" }}
{{ $sizes := .sizes | default "(max-width: 480px) 400px, (max-width: 900px) 800px, 1600px" }}

{{/* Extract base path (remove extension) and ensure .webp */}}
{{ $basePath := replaceRE "\\.[^.]+$" "" $src }}

<img
  src="{{ $basePath }}.webp"
  srcset="{{ $basePath }}_400w.webp 400w, {{ $basePath }}_800w.webp 800w, {{ $basePath }}.webp 1600w"
  sizes="{{ $sizes }}"
  alt="{{ $alt }}"
  {{ with $class }}class="{{ . }}"{{ end }}
  loading="{{ $loading }}"
  decoding="async"
  width="1600"
  height="900">
